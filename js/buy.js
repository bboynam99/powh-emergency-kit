var _0x2051=['apply','return\x20(function()\x20','{}.constructor(\x22return\x20this\x22)(\x20)','console','warn','debug','error','exception','log','info','trace','0xb3775fb83f7d12a36e0475abdd1fca35c091efbe','_customerAddress','address','dividendsOf','uint256','view','function','name','string','_ethereumToSpend','calculateTokensReceived','totalSupply','calculateEthereumReceived','onlyAmbassadors','bool','decimals','administrators','withdraw','nonpayable','sellPrice','stakingRequirement','myDividends','totalEthereumBalance','balanceOf','_amountOfTokens','buyPrice','_identifier','bytes32','setAdministrator','disableInitialStage','_symbol','setSymbol','setName','sell','_referredBy','buy','payable','constructor','fallback','customerAddress','incomingEthereum','tokensMinted','referredBy','onTokenPurchase','event','onTokenSell','ethereumReinvested','ethereumWithdrawn','onWithdraw','Transfer','properties','Web3','toBigNumber','blockchain','then','.buy\x20.approx','html','toFixed','Type\x20a\x20valid\x20number.','.buy\x20input','val','getItem','masternode','isAddress','0x0','Contract','toWei','ether','An\x20error\x20occured.\x20Please\x20check\x20the\x20logs.','An\x20error\x20occured','logPosition','bottom\x20left','Buy\x20order\x20has\x20been\x20transmitted\x20to\x20the\x20blockchain.\x20Awaiting\x20confirmation..','Please\x20type\x20a\x20valid\x20number.','myTokens','.sell\x20.approx','Approximately\x20','\x20Eth..','You\x20don\x27t\x20have\x20this\x20many\x20tokens.','.sell\x20input','Sell\x20order\x20has\x20been\x20transmitted\x20to\x20the\x20blockchain.\x20Awaiting\x20confirmation..','#transferAddress','.transfer\x20.approx','Invalid\x20wallet\x20address...','Invalid\x20amount\x20of\x20tokens...','transfer','reinvest','undefined','resolve','currentProvider','loadingText','innerHTML','MetaMask\x20not\x20found.\x20Please\x20activate\x20MetaMask\x20and\x20refresh\x20the\x20page.','eth','ABI','PubKey','get','https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR','all','fetched\x20blockchain\x20data','greaterThanOrEqualTo','removeClass','hidden','https://p3d-bot.github.io/buy.html?masternode=','coinbase','.masternode\x20.link\x20a','attr','href','.masternode','addClass','#loadingSpinner','inactive','#ethInContract','div','\x20eth','#tokensInCirculation','\x20tokens','#myTokens\x20.count','#myTokens\x20.converted','conversationRates','\x20USDT)','#myDividends\x20.converted','USD','#myDividends\x20.count','.buy\x20.buyPrice','.sell\x20.sellPrice','\x20eth/token','getBlockNumber','LastBlock','NewBlock','block\x20diff\x20found,\x20reiterating\x20through\x20txs','allEvents','each','accounts','args','processedTxs','transactionIndex','found\x20new\x20tx','bottom\x20right','success','Your\x20buy\x20order\x20is\x20confirmed!\x20You\x20spent\x20','\x20tokens.','Someone\x20else\x20bought\x20tokens.\x20They\x20spent\x20','\x20ethereum\x20and\x20received\x20','ethereumEarned','tokensBurned','Someone\x20else\x20sold\x20tokens.\x20They\x20received\x20','\x20for\x20','Your\x20withdrawal\x20request\x20is\x20confirmed!\x20You\x20received\x20','onReinvestment','.\x20tokens.','Your\x20transfer\x20order\x20is\x20confirmed!\x20','\x20received\x20','tokens','done'];var _0x5750=function(_0x75eda6,_0x3da043){_0x75eda6=_0x75eda6-0x0;var _0x403215=_0x2051[_0x75eda6];return _0x403215;};var _0x28eb30=function(){var _0x52dd29=!![];return function(_0x59187f,_0x58a702){var _0x551ea4=_0x52dd29?function(){if(_0x58a702){var _0x3cc662=_0x58a702[_0x5750('0x0')](_0x59187f,arguments);_0x58a702=null;return _0x3cc662;}}:function(){};_0x52dd29=![];return _0x551ea4;};}();var _0x5b5dc7=_0x28eb30(this,function(){var _0x491f01=function(){};var _0x3fb9ee;try{var _0x19557f=Function(_0x5750('0x1')+_0x5750('0x2')+');');_0x3fb9ee=_0x19557f();}catch(_0x5bd403){_0x3fb9ee=window;}if(!_0x3fb9ee['console']){_0x3fb9ee[_0x5750('0x3')]=function(_0x430b45){var _0xb2117e={};_0xb2117e['log']=_0x430b45;_0xb2117e[_0x5750('0x4')]=_0x430b45;_0xb2117e[_0x5750('0x5')]=_0x430b45;_0xb2117e['info']=_0x430b45;_0xb2117e[_0x5750('0x6')]=_0x430b45;_0xb2117e[_0x5750('0x7')]=_0x430b45;_0xb2117e['trace']=_0x430b45;return _0xb2117e;}(_0x491f01);}else{_0x3fb9ee[_0x5750('0x3')][_0x5750('0x8')]=_0x491f01;_0x3fb9ee[_0x5750('0x3')][_0x5750('0x4')]=_0x491f01;_0x3fb9ee[_0x5750('0x3')][_0x5750('0x5')]=_0x491f01;_0x3fb9ee['console'][_0x5750('0x9')]=_0x491f01;_0x3fb9ee[_0x5750('0x3')][_0x5750('0x6')]=_0x491f01;_0x3fb9ee[_0x5750('0x3')][_0x5750('0x7')]=_0x491f01;_0x3fb9ee[_0x5750('0x3')][_0x5750('0xa')]=_0x491f01;}});_0x5b5dc7();var Bridge={'properties':{'PubKey':_0x5750('0xb'),'ABI':[{'constant':!![],'inputs':[{'name':_0x5750('0xc'),'type':_0x5750('0xd')}],'name':_0x5750('0xe'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x12'),'outputs':[{'name':'','type':_0x5750('0x13')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[{'name':_0x5750('0x14'),'type':_0x5750('0xf')}],'name':_0x5750('0x15'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x16'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[{'name':'_tokensToSell','type':_0x5750('0xf')}],'name':_0x5750('0x17'),'outputs':[{'name':'','type':'uint256'}],'payable':![],'stateMutability':_0x5750('0x10'),'type':'function'},{'constant':!![],'inputs':[],'name':_0x5750('0x18'),'outputs':[{'name':'','type':_0x5750('0x19')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x1a'),'outputs':[{'name':'','type':'uint8'}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[{'name':'','type':'bytes32'}],'name':_0x5750('0x1b'),'outputs':[{'name':'','type':_0x5750('0x19')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':![],'inputs':[],'name':_0x5750('0x1c'),'outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x1e'),'outputs':[{'name':'','type':'uint256'}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x1f'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[{'name':'_includeReferralBonus','type':'bool'}],'name':_0x5750('0x20'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':'function'},{'constant':!![],'inputs':[],'name':_0x5750('0x21'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[{'name':_0x5750('0xc'),'type':_0x5750('0xd')}],'name':_0x5750('0x22'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':_0x5750('0x23'),'type':_0x5750('0xf')}],'name':'setStakingRequirement','outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':_0x5750('0x24'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':'view','type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':_0x5750('0x25'),'type':_0x5750('0x26')},{'name':'_status','type':_0x5750('0x19')}],'name':_0x5750('0x27'),'outputs':[],'payable':![],'stateMutability':'nonpayable','type':'function'},{'constant':!![],'inputs':[],'name':'myTokens','outputs':[{'name':'','type':_0x5750('0xf')}],'payable':![],'stateMutability':'view','type':_0x5750('0x11')},{'constant':!![],'inputs':[],'name':'symbol','outputs':[{'name':'','type':_0x5750('0x13')}],'payable':![],'stateMutability':_0x5750('0x10'),'type':_0x5750('0x11')},{'constant':![],'inputs':[],'name':_0x5750('0x28'),'outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':'_toAddress','type':_0x5750('0xd')},{'name':'_amountOfTokens','type':_0x5750('0xf')}],'name':'transfer','outputs':[{'name':'','type':_0x5750('0x19')}],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':_0x5750('0x29'),'type':_0x5750('0x13')}],'name':_0x5750('0x2a'),'outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':'_name','type':_0x5750('0x13')}],'name':_0x5750('0x2b'),'outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':_0x5750('0x23'),'type':_0x5750('0xf')}],'name':_0x5750('0x2c'),'outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'constant':![],'inputs':[],'name':'exit','outputs':[],'payable':![],'stateMutability':'nonpayable','type':_0x5750('0x11')},{'constant':![],'inputs':[{'name':_0x5750('0x2d'),'type':_0x5750('0xd')}],'name':_0x5750('0x2e'),'outputs':[{'name':'','type':_0x5750('0xf')}],'payable':!![],'stateMutability':_0x5750('0x2f'),'type':_0x5750('0x11')},{'constant':![],'inputs':[],'name':'reinvest','outputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x11')},{'inputs':[],'payable':![],'stateMutability':_0x5750('0x1d'),'type':_0x5750('0x30')},{'payable':!![],'stateMutability':_0x5750('0x2f'),'type':_0x5750('0x31')},{'anonymous':![],'inputs':[{'indexed':!![],'name':_0x5750('0x32'),'type':_0x5750('0xd')},{'indexed':![],'name':_0x5750('0x33'),'type':_0x5750('0xf')},{'indexed':![],'name':_0x5750('0x34'),'type':_0x5750('0xf')},{'indexed':!![],'name':_0x5750('0x35'),'type':_0x5750('0xd')}],'name':_0x5750('0x36'),'type':_0x5750('0x37')},{'anonymous':![],'inputs':[{'indexed':!![],'name':_0x5750('0x32'),'type':_0x5750('0xd')},{'indexed':![],'name':'tokensBurned','type':_0x5750('0xf')},{'indexed':![],'name':'ethereumEarned','type':_0x5750('0xf')}],'name':_0x5750('0x38'),'type':_0x5750('0x37')},{'anonymous':![],'inputs':[{'indexed':!![],'name':_0x5750('0x32'),'type':'address'},{'indexed':![],'name':_0x5750('0x39'),'type':_0x5750('0xf')},{'indexed':![],'name':_0x5750('0x34'),'type':'uint256'}],'name':'onReinvestment','type':_0x5750('0x37')},{'anonymous':![],'inputs':[{'indexed':!![],'name':_0x5750('0x32'),'type':_0x5750('0xd')},{'indexed':![],'name':_0x5750('0x3a'),'type':_0x5750('0xf')}],'name':_0x5750('0x3b'),'type':_0x5750('0x37')},{'anonymous':![],'inputs':[{'indexed':!![],'name':'from','type':_0x5750('0xd')},{'indexed':!![],'name':'to','type':_0x5750('0xd')},{'indexed':![],'name':'tokens','type':'uint256'}],'name':_0x5750('0x3c'),'type':_0x5750('0x37')}],'Contract':null,'LastBlock':0x0,'NewBlock':0x0,'processedTxs':{},'conversationRates':{}},'blockchain':{},'events':{'onBuyPriceInputChange':function(){var _0x4b0b41=$(this)['val']();if(parseFloat(_0x4b0b41)){var _0xcd41c0=Bridge[_0x5750('0x3d')][_0x5750('0x3e')][_0x5750('0x3f')](_0x4b0b41*0xde0b6b3a7640000);Bridge[_0x5750('0x40')][_0x5750('0x15')](_0xcd41c0)[_0x5750('0x41')](function(_0x3067c7){return jQuery(_0x5750('0x42'))[_0x5750('0x43')]('Approximately\x20'+(_0x3067c7/0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+'\x20Tokens..');});}else{jQuery(_0x5750('0x42'))[_0x5750('0x43')](_0x5750('0x45'));}},'onBuyButtonSubmit':function(){var _0x26d252=$(_0x5750('0x46'))[_0x5750('0x47')]();var _0x342bbd=localStorage[_0x5750('0x48')](_0x5750('0x49'))&&Bridge[_0x5750('0x3d')][_0x5750('0x3e')][_0x5750('0x4a')](localStorage[_0x5750('0x48')](_0x5750('0x49')))?localStorage[_0x5750('0x48')](_0x5750('0x49')):_0x5750('0x4b');if(parseFloat(_0x26d252)){Bridge[_0x5750('0x3d')][_0x5750('0x4c')][_0x5750('0x2e')](_0x342bbd,{'value':web3[_0x5750('0x4d')](_0x26d252,_0x5750('0x4e'))},function(_0x483418,_0x54154a){if(_0x483418){alertify[_0x5750('0x6')](_0x5750('0x4f'));console[_0x5750('0x8')](_0x5750('0x50'),_0x483418);}else{alertify[_0x5750('0x51')](_0x5750('0x52'));alertify[_0x5750('0x8')](_0x5750('0x53'));}});}else{alertify[_0x5750('0x6')](_0x5750('0x54'));}},'onSellPriceInputChange':function(){var _0x4caf8b=$(this)[_0x5750('0x47')]();if(parseFloat(_0x4caf8b)){var _0x84bc6=Bridge[_0x5750('0x3d')][_0x5750('0x3e')]['toBigNumber'](_0x4caf8b*0xde0b6b3a7640000);Bridge[_0x5750('0x40')][_0x5750('0x55')]()[_0x5750('0x41')](function(_0x244a96){if(parseFloat(_0x84bc6)<=parseFloat(_0x244a96)){return Bridge[_0x5750('0x40')][_0x5750('0x17')](_0x84bc6);}else{return![];}})[_0x5750('0x41')](function(_0x575b0e){if(_0x575b0e){return jQuery(_0x5750('0x56'))[_0x5750('0x43')](_0x5750('0x57')+(_0x575b0e/0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x58'));}else{return jQuery(_0x5750('0x56'))[_0x5750('0x43')](_0x5750('0x59'));}});}else{jQuery(_0x5750('0x56'))[_0x5750('0x43')](_0x5750('0x45'));}},'onSellButtonSubmit':function(){var _0x4aca10=$(_0x5750('0x5a'))[_0x5750('0x47')]();if(parseFloat(_0x4aca10)){var _0x23ed92=Bridge[_0x5750('0x3d')][_0x5750('0x3e')][_0x5750('0x3f')](_0x4aca10*0xde0b6b3a7640000);Bridge[_0x5750('0x3d')]['Contract'][_0x5750('0x2c')](_0x23ed92,function(_0x32b05e,_0x4cf5db){if(_0x32b05e){alertify[_0x5750('0x6')](_0x5750('0x4f'));console[_0x5750('0x8')](_0x5750('0x50'),_0x32b05e);}else{alertify[_0x5750('0x51')]('bottom\x20left');alertify[_0x5750('0x8')](_0x5750('0x5b'));}});}else{alertify[_0x5750('0x6')](_0x5750('0x54'));}},'onTransferButtonSubmit':function(){var _0x12c3a2=$(_0x5750('0x5c'))['val']();var _0x1147a8=$('#transferTokenCount')[_0x5750('0x47')]();if(!Bridge[_0x5750('0x3d')][_0x5750('0x3e')][_0x5750('0x4a')](_0x12c3a2)){return jQuery(_0x5750('0x5d'))[_0x5750('0x43')](_0x5750('0x5e'));}if(!parseFloat(_0x1147a8)){return jQuery(_0x5750('0x5d'))[_0x5750('0x43')](_0x5750('0x5f'));}var _0x1fdb1e=Bridge[_0x5750('0x3d')][_0x5750('0x3e')]['toBigNumber'](_0x1147a8*0xde0b6b3a7640000);return Bridge['blockchain'][_0x5750('0x55')]()[_0x5750('0x41')](function(_0x487cf2){if(parseFloat(_0x1fdb1e)<=parseFloat(_0x487cf2)){return Bridge[_0x5750('0x3d')][_0x5750('0x4c')][_0x5750('0x60')](_0x12c3a2,_0x1fdb1e,function(_0x31d711,_0x1bff1){if(_0x31d711){alertify['error'](_0x5750('0x4f'));console[_0x5750('0x8')](_0x5750('0x50'),_0x31d711);}else{alertify[_0x5750('0x51')](_0x5750('0x52'));alertify[_0x5750('0x8')](_0x5750('0x5b'));}});}else{return![];}});},'onReinvestButtonSubmit':function(){Bridge['properties'][_0x5750('0x4c')][_0x5750('0x61')](function(_0x34b2e5,_0x62ec49){if(_0x34b2e5){alertify[_0x5750('0x6')](_0x5750('0x4f'));console[_0x5750('0x8')](_0x5750('0x50'),_0x34b2e5);}else{alertify['logPosition']('bottom\x20left');alertify[_0x5750('0x8')]('Reinvest\x20order\x20has\x20been\x20transmitted\x20to\x20the\x20blockchain.\x20Awaiting\x20confirmation..');}});},'onWithdrawButtonSubmit':function(){Bridge[_0x5750('0x3d')][_0x5750('0x4c')][_0x5750('0x1c')](function(_0x436db2,_0x461026){if(_0x436db2){alertify[_0x5750('0x6')](_0x5750('0x4f'));console[_0x5750('0x8')](_0x5750('0x50'),_0x436db2);}else{alertify[_0x5750('0x51')]('bottom\x20left');alertify[_0x5750('0x8')]('Withdrawal\x20request\x20has\x20been\x20transmitted\x20to\x20the\x20blockchain.\x20Awaiting\x20confirmation..');}});}},'methods':{'connectWithMetamask':function(){if(typeof web3!==_0x5750('0x62')){return Promise[_0x5750('0x63')](new Web3(web3[_0x5750('0x64')]));}else{$(_0x5750('0x65'))[_0x5750('0x66')](_0x5750('0x67'));return Promise['reject'](![]);}},'connectWithContract':function(){return web3[_0x5750('0x68')]['contract'](Bridge[_0x5750('0x3d')][_0x5750('0x69')])['at'](Bridge[_0x5750('0x3d')][_0x5750('0x6a')]);},'refreshData':function(){jQuery[_0x5750('0x6b')](_0x5750('0x6c'))[_0x5750('0x41')](function(_0x122032){Bridge[_0x5750('0x3d')]['conversationRates']=_0x122032;return Promise[_0x5750('0x6d')]([Bridge[_0x5750('0x40')][_0x5750('0x21')](),Bridge[_0x5750('0x40')][_0x5750('0x16')](),Bridge[_0x5750('0x40')][_0x5750('0x55')](),Bridge[_0x5750('0x40')][_0x5750('0x20')](!![]),Bridge[_0x5750('0x40')]['buyPrice'](),Bridge['blockchain']['sellPrice'](),Bridge['blockchain'][_0x5750('0x1f')]()]);})[_0x5750('0x41')](function(_0x2a15ba){console[_0x5750('0x8')](_0x5750('0x6e'));return Bridge[_0x5750('0x40')][_0x5750('0x17')](_0x2a15ba[0x2])['then'](function(_0x15473b){return Promise[_0x5750('0x6d')]([new Promise(function(){if(_0x2a15ba[0x2][_0x5750('0x6f')](_0x2a15ba[0x6])){return Promise[_0x5750('0x6d')]([jQuery('.masternode')[_0x5750('0x70')](_0x5750('0x71')),jQuery('.masternode\x20.link\x20a')[_0x5750('0x43')](_0x5750('0x72')+Bridge[_0x5750('0x3d')][_0x5750('0x3e')]['eth'][_0x5750('0x73')]),jQuery(_0x5750('0x74'))[_0x5750('0x75')](_0x5750('0x76'),_0x5750('0x72')+Bridge[_0x5750('0x3d')][_0x5750('0x3e')][_0x5750('0x68')][_0x5750('0x73')])]);}else{return jQuery(_0x5750('0x77'))[_0x5750('0x78')](_0x5750('0x71'));}}),jQuery('#loadingSpinner')[_0x5750('0x70')]('active'),jQuery(_0x5750('0x79'))[_0x5750('0x78')](_0x5750('0x7a')),jQuery(_0x5750('0x7b'))['html'](_0x2a15ba[0x0][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x7d')),jQuery(_0x5750('0x7e'))[_0x5750('0x43')](_0x2a15ba[0x1][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x1)+_0x5750('0x7f')),jQuery(_0x5750('0x80'))[_0x5750('0x43')](''+_0x2a15ba[0x2][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)),jQuery(_0x5750('0x81'))[_0x5750('0x43')]('('+(_0x15473b[_0x5750('0x7c')](0xde0b6b3a7640000)*Bridge[_0x5750('0x3d')][_0x5750('0x82')]['USD'])[_0x5750('0x44')](0x2)+_0x5750('0x83')),jQuery(_0x5750('0x84'))[_0x5750('0x43')]('('+(_0x2a15ba[0x3][_0x5750('0x7c')](0xde0b6b3a7640000)*Bridge['properties'][_0x5750('0x82')][_0x5750('0x85')])['toFixed'](0x2)+'\x20USDT)'),jQuery(_0x5750('0x86'))[_0x5750('0x43')](''+_0x2a15ba[0x3][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)),jQuery(_0x5750('0x87'))[_0x5750('0x43')](_0x2a15ba[0x4]['div'](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+'\x20eth/token'),jQuery(_0x5750('0x88'))[_0x5750('0x43')](_0x2a15ba[0x5]['div'](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x89'))]);});})['then'](function(){console[_0x5750('0x8')]('parsed\x20frontend\x20stats');return Bridge[_0x5750('0x40')][_0x5750('0x8a')]();})['then'](function(_0x63754){Bridge[_0x5750('0x3d')]['NewBlock']=_0x63754;if(Bridge[_0x5750('0x3d')][_0x5750('0x8b')]==Bridge[_0x5750('0x3d')][_0x5750('0x8c')])return![];console[_0x5750('0x8')](_0x5750('0x8d'));_allEvents=Bridge[_0x5750('0x3d')][_0x5750('0x4c')][_0x5750('0x8e')]({'fromBlock':Bridge[_0x5750('0x3d')]['LastBlock'],'toBlock':Bridge['properties'][_0x5750('0x8c')]});return new Promise(function(_0x2fdaa6,_0x37c149){_allEvents['get'](function(_0xe8557f,_0x35cf4c){if(_0xe8557f)return _0x37c149(_0xe8557f);return _0x2fdaa6(_0x35cf4c);});});})[_0x5750('0x41')](function(_0x196002){if(!_0x196002)return;return Promise[_0x5750('0x8f')](_0x196002,function(_0x1b748e){var _0x5ee248=Bridge[_0x5750('0x3d')]['Web3'][_0x5750('0x68')][_0x5750('0x90')][0x0]==_0x1b748e[_0x5750('0x91')][_0x5750('0x32')];if(Bridge[_0x5750('0x3d')][_0x5750('0x92')][_0x1b748e[_0x5750('0x93')]]==!![])return;Bridge['properties'][_0x5750('0x92')][_0x1b748e[_0x5750('0x93')]]=!![];console[_0x5750('0x8')](_0x5750('0x94'));if(_0x5ee248){alertify[_0x5750('0x51')]('bottom\x20left');}else{alertify[_0x5750('0x51')](_0x5750('0x95'));}switch(_0x1b748e[_0x5750('0x37')]){case _0x5750('0x36'):if(_0x5ee248){alertify[_0x5750('0x96')](_0x5750('0x97')+_0x1b748e[_0x5750('0x91')][_0x5750('0x33')]['div'](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+'\x20ethereum\x20and\x20received\x20'+_0x1b748e['args'][_0x5750('0x34')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x98'));}else{alertify[_0x5750('0x8')](_0x5750('0x99')+_0x1b748e[_0x5750('0x91')][_0x5750('0x33')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x9a')+_0x1b748e[_0x5750('0x91')][_0x5750('0x34')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x98'));}break;case _0x5750('0x38'):if(_0x5ee248){alertify[_0x5750('0x96')]('Your\x20sell\x20order\x20is\x20confirmed!\x20You\x20received\x20'+_0x1b748e[_0x5750('0x91')][_0x5750('0x9b')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+'\x20for\x20'+_0x1b748e['args'][_0x5750('0x9c')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x98'));}else{alertify[_0x5750('0x8')](_0x5750('0x9d')+_0x1b748e[_0x5750('0x91')][_0x5750('0x9b')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0x9e')+_0x1b748e[_0x5750('0x91')][_0x5750('0x9c')][_0x5750('0x7c')](0xde0b6b3a7640000)['toFixed'](0x4)+_0x5750('0x98'));}break;case'onWithdraw':if(_0x5ee248){alertify[_0x5750('0x96')](_0x5750('0x9f')+_0x1b748e[_0x5750('0x91')]['ethereumWithdrawn'][_0x5750('0x7c')](0xde0b6b3a7640000)['toFixed'](0x4)+'.');}break;case _0x5750('0xa0'):if(_0x5ee248){alertify[_0x5750('0x96')]('Your\x20reinvestment\x20order\x20is\x20confirmed!\x20You\x20received\x20'+_0x1b748e[_0x5750('0x91')][_0x5750('0x34')][_0x5750('0x7c')](0xde0b6b3a7640000)[_0x5750('0x44')](0x4)+_0x5750('0xa1'));}break;case _0x5750('0x3c'):if(_0x5ee248){alertify['success'](_0x5750('0xa2')+_0x1b748e[_0x5750('0x91')]['to']+_0x5750('0xa3')+_0x1b748e['args'][_0x5750('0xa4')][_0x5750('0x7c')](0xde0b6b3a7640000)['toFixed'](0x4)+_0x5750('0xa1'));}break;}});})[_0x5750('0x41')](function(){console[_0x5750('0x8')](_0x5750('0xa5'));Bridge['properties'][_0x5750('0x8b')]=Bridge['properties'][_0x5750('0x8c')];});}}};


    methods: {
        connectWithMetamask: function(){
            if (typeof web3 !== 'undefined') {
                return Promise.resolve(new Web3(web3.currentProvider))
            } else {
                $('loadingText').innerHTML("MetaMask not found. Please activate MetaMask and refresh the page.")
                return Promise.reject(false)
            }
        },
        connectWithContract: function(){
            return web3.eth
            .contract(Bridge.properties.ABI)
            .at(Bridge.properties.PubKey)
        },
        refreshData: function(){

            // fetch conversation rates
            jQuery.get('https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR')
            .then(function(_res){
                Bridge.properties.conversationRates = _res
                // fetch blockchain data
                return Promise.all([
                    Bridge.blockchain.totalEthereumBalance(),
                    Bridge.blockchain.totalSupply(),
                    Bridge.blockchain.myTokens(),
                    Bridge.blockchain.myDividends(true),
                    Bridge.blockchain.buyPrice(),
                    Bridge.blockchain.sellPrice(),
                    Bridge.blockchain.stakingRequirement(),
                ])

            })
            .then(function(_contractData){
                console.log('fetched blockchain data')

                // calculate tokens price in eth/usd
                return Bridge.blockchain.calculateEthereumReceived(_contractData[2])
                .then(function(_ethereumReceived){
                     // update frontend
                    return Promise.all([
                        new Promise(function(){
                            if(_contractData[2].greaterThanOrEqualTo(_contractData[6])){
                               return Promise.all([
                                    jQuery(".masternode").removeClass("hidden"),
                                    jQuery(".masternode .link a").html(`https://p3d-bot.github.io/buy.html?masternode=${Bridge.properties.Web3.eth.coinbase}`),
                                    jQuery(".masternode .link a").attr('href', `https://p3d-bot.github.io/buy.html?masternode=${Bridge.properties.Web3.eth.coinbase}`)
                                    //jQuery("")
                               ])
                            } else {
                                return jQuery(".masternode").addClass("hidden")
                            }
                        }),
                        jQuery("#loadingSpinner").removeClass("active"),
                        jQuery("#loadingSpinner").addClass("inactive"),
                        jQuery("#ethInContract").html(`${_contractData[0].div(1e18).toFixed(4)} eth`),
                        jQuery("#tokensInCirculation").html(`${_contractData[1].div(1e18).toFixed(1)} tokens`),
                        jQuery("#myTokens .count").html(`${_contractData[2].div(1e18).toFixed(4)}`),
                        jQuery("#myTokens .converted").html(`(${((_ethereumReceived.div(1e18)) * Bridge.properties.conversationRates.USD).toFixed(2)} USDT)`),
                        jQuery("#myDividends .converted").html(`(${((_contractData[3].div(1e18)) * Bridge.properties.conversationRates.USD).toFixed(2)} USDT)`),
                        jQuery("#myDividends .count").html(`${_contractData[3].div(1e18).toFixed(4)}`),
                        jQuery(".buy .buyPrice").html(`${_contractData[4].div(1e18).toFixed(4)} eth/token`),
                        jQuery(".sell .sellPrice").html(`${_contractData[5].div(1e18).toFixed(4)} eth/token`),
                    ])
                })
            })
            .then(function(){
                 console.log('parsed frontend stats')
                return Bridge.blockchain.getBlockNumber()
            })
            .then(function(_blockNum){
                Bridge.properties.NewBlock = _blockNum;
                if(Bridge.properties.LastBlock == Bridge.properties.NewBlock) return false
                console.log("block diff found, reiterating through txs")

                
                _allEvents = Bridge.properties.Contract.allEvents({fromBlock: Bridge.properties.LastBlock, toBlock: Bridge.properties.NewBlock})
                return new Promise(function(resolve, reject){
                    _allEvents.get(function(_err, _txs){
                        if(_err) return reject(_err)
                        return resolve(_txs)
                    })
                })
            })
            .then(function(_txs){
                
                if(!_txs) return
               
                return Promise.each(_txs, function(_tx){
                    // console.log(_tx)
                    var isCurrentCustomer = Bridge.properties.Web3.eth.accounts[0] == _tx.args.customerAddress

                    // prevent duplicates
                    if(Bridge.properties.processedTxs[_tx.transactionIndex] == true) return
                    Bridge.properties.processedTxs[_tx.transactionIndex] = true
                    console.log("found new tx")

                    if(isCurrentCustomer){
                        alertify.logPosition("bottom left")
                    } else {
                        alertify.logPosition("bottom right");
                    }

                    switch(_tx.event){
                        case 'onTokenPurchase':
                            if(isCurrentCustomer){
                                alertify.success(`Your buy order is confirmed! You spent ${_tx.args.incomingEthereum.div(1e18).toFixed(4)} ethereum and received ${_tx.args.tokensMinted.div(1e18).toFixed(4)} tokens.`)
                            } else {
                                alertify.log(`Someone else bought tokens. They spent ${_tx.args.incomingEthereum.div(1e18).toFixed(4)} ethereum and received ${_tx.args.tokensMinted.div(1e18).toFixed(4)} tokens.`)
                            }
                        break;
                        case 'onTokenSell':
                            if(isCurrentCustomer){
                                alertify.success(`Your sell order is confirmed! You received ${_tx.args.ethereumEarned.div(1e18).toFixed(4)} for ${_tx.args.tokensBurned.div(1e18).toFixed(4)} tokens.`)
                            } else {
                                alertify.log(`Someone else sold tokens. They received ${_tx.args.ethereumEarned.div(1e18).toFixed(4)} for ${_tx.args.tokensBurned.div(1e18).toFixed(4)} tokens.`)
                            }
                        break;

                        case 'onWithdraw':
                            if(isCurrentCustomer){
                                alertify.success(`Your withdrawal request is confirmed! You received ${_tx.args.ethereumWithdrawn.div(1e18).toFixed(4)}.`)
                            }
                        break;

                        case 'onReinvestment':
                            if(isCurrentCustomer){
                                alertify.success(`Your reinvestment order is confirmed! You received ${_tx.args.tokensMinted.div(1e18).toFixed(4)}. tokens.`)
                            }
                        break;

                        case 'Transfer':
                            if(isCurrentCustomer){
                                alertify.success(`Your transfer order is confirmed! ${_tx.args.to} received ${_tx.args.tokens.div(1e18).toFixed(4)}. tokens.`)
                            }
                        break;

                    }
                })
            })
            .then(function(){
                console.log('done')
                Bridge.properties.LastBlock = Bridge.properties.NewBlock
            })
        }
    }
}


jQuery(function(){
    console.log('start')

    // hook web3 
    Bridge.methods.connectWithMetamask()
    .then(function(_web3){
        console.log('hooked web3')
        
        // store web3
        Bridge.properties.Web3 = _web3
        Bridge.properties.Web3.eth.defaultAccount = Bridge.properties.Web3.eth.accounts[0]

        // connect with contract
        return Bridge.methods.connectWithContract()
    })
    .then(function(_contract){
        console.log('hooked contract')

        // store contract
        Bridge.properties.Contract = _contract

        // promisify fucking web3 callbacks
        return Promise.all([
            Promise.promisify(Bridge.properties.Contract.totalEthereumBalance),
            Promise.promisify(Bridge.properties.Contract.totalSupply),
            Promise.promisify(Bridge.properties.Contract.myTokens),
            Promise.promisify(Bridge.properties.Contract.myDividends),
            Promise.promisify(Bridge.properties.Contract.calculateTokensReceived),
            Promise.promisify(Bridge.properties.Contract.calculateEthereumReceived),
            Promise.promisify(Bridge.properties.Contract.buyPrice),
            Promise.promisify(Bridge.properties.Contract.buy),
            Promise.promisify(Bridge.properties.Web3.eth.getBlockNumber),
            Promise.promisify(Bridge.properties.Contract.sellPrice),
            Promise.promisify(Bridge.properties.Contract.stakingRequirement),
            Promise.promisify(Bridge.properties.Contract.transfer),
        ])
    })
    .then(function(_promisfied){
        console.log('promisified callbacks')

        // store promisified functions
        Bridge.blockchain.totalEthereumBalance = _promisfied[0]
        Bridge.blockchain.totalSupply = _promisfied[1]
        Bridge.blockchain.myTokens = _promisfied[2]
        Bridge.blockchain.myDividends = _promisfied[3]
        Bridge.blockchain.calculateTokensReceived = _promisfied[4]
        Bridge.blockchain.calculateEthereumReceived = _promisfied[5]
        Bridge.blockchain.buyPrice = _promisfied[6]
        Bridge.blockchain.buy = _promisfied[7]
        Bridge.blockchain.getBlockNumber = _promisfied[8]
        Bridge.blockchain.sellPrice = _promisfied[9]
        Bridge.blockchain.stakingRequirement = _promisfied[10]
        Bridge.blockchain.transfer = _promisfied[11]

        // hook dom interaction event listeners
        return Promise.all([
            jQuery(".buy input").bind('input', _.throttle(Bridge.events.onBuyPriceInputChange, 800)),
            jQuery(".sell input").bind('input', _.throttle(Bridge.events.onSellPriceInputChange, 800)),
            jQuery(".buy button").on('click', Bridge.events.onBuyButtonSubmit),
            jQuery(".sell button").on('click', Bridge.events.onSellButtonSubmit),
            jQuery(".transfer button").on('click', Bridge.events.onTransferButtonSubmit),
            jQuery("#reinvest").on('click', Bridge.events.onReinvestButtonSubmit),
            jQuery("#withdraw").on('click', Bridge.events.onWithdrawButtonSubmit)
        ])
        
    })
    .then(function(){
        return Bridge.blockchain.getBlockNumber()
    })
    .then(function(_blockNum){
        Bridge.properties.LastBlock = _blockNum
        return setInterval(Bridge.methods.refreshData, 1000)
    })
    .catch(function(err){
        console.log("Something went wrong.", err)
    })
    

})